# streamlit_mbti_books.py
# Streamlit 웹 앱: 학생이 MBTI를 선택하면 고전 도서를 추천합니다.
# 외부 라이브러리 불필요 (기본 Streamlit만 사용)

import streamlit as st
import random

st.set_page_config(page_title="MBTI 고전 추천 🎓📚", page_icon="📖", layout="centered")

st.title("📚 MBTI 기반 고전 추천 도서관")
st.markdown("""
학생이 자신의 MBTI를 선택하면 그 유형에 잘 맞는 **고전 작품**을 추천해주는 간단하고 세련된 웹 앱입니다. 
이모지와 짧은 설명으로 책의 매력을 느껴보세요! ✨
""")

# MBTI별 추천 도서 데이터 (각 유형마다 2~3권의 클래식)
MBTI_RECOMMENDATIONS = {
    "INTJ": [
        ("『죄와 벌』 - 표도르 도스토옙스키", "깊은 심리 묘사와 도덕적 질문을 좋아하는 계획형에게 추천합니다. 🧭"),
        ("『1984』 - 조지 오웰", "전체주의와 시스템 분석에 관심 있는 이성적 사색가에게 탁월한 선택. 🔎")
    ],
    "INTP": [
        ("『프랑켄슈타인』 - 메리 셸리", "아이디어와 창조의 윤리를 탐구하는 탐구형에게 흥미롭습니다. ⚗️"),
        ("『이방인』 - 알베르 카뮈", "부조리와 존재에 대한 사유를 즐기는 분께 추천합니다. 🌫️")
    ],
    "ENTJ": [
        ("『군주론』 - 니콜로 마키아벨리", "리더십과 전략을 실용적으로 배우고 싶은 추진형에게 적합합니다. ♟️"),
        ("『전쟁과 평화』 - 톨스토이", "대규모 사건 속에서 시스템과 인간을 보는 통찰을 제공합니다. 🌍")
    ],
    "ENTP": [
        ("『보이지 않는 도시들』 - 이탈로 칼비노", "상상력과 아이디어 놀이를 즐기는 사람에게 신선합니다. ✨"),
        ("『걸리버 여행기』 - 조너선 스위프트", "풍자와 유머로 사회를 뒤집어 보는 재미가 있습니다. 🎭")
    ],
    "INFJ": [
        ("『작은 왕자』 - 앙투안 드 생텍쥐페리", "내면의 의미와 관계를 소중히 여기는 분께 마음에 닿습니다. 🌙"),
        ("『자유로부터의 도피』 - 에리히 프롬", "인간의 본성과 자유에 대한 철학적 통찰을 제공합니다. 🌱")
    ],
    "INFP": [
        ("『오만과 편견』 - 제인 오스틴", "감성적 공감과 인간관계를 섬세히 즐기는 분께 추천합니다. 💌"),
        ("『데미안』 - 헤르만 헤세", "자기 발견과 내적 성장의 여정에 공감하는 이들에게. 🌿")
    ],
    "ENFJ": [
        ("『자기 앞의 생』 - 로맹 가리", "타인의 감정과 관계를 중시하는 지도형에게 울림을 줍니다. 🤝"),
        ("『인간 실격』 - 다자이 오사무", "인간의 어둠과 연민을 이해하려는 분께 추천합니다. 🖤")
    ],
    "ENFP": [
        ("『젊은 베르테르의 슬픔』 - 괴테", "열정과 감정의 흐름을 온몸으로 느끼는 모험가에게 잘 맞습니다. 🔥"),
        ("『바람과 함께 사라지다』 - 마거릿 미첼", "드라마와 격정적인 이야기에서 매력을 느끼는 분께. 🎬")
    ],
    "ISTJ": [
        ("『위대한 유산』 - 찰스 디킨스", "질서와 전통, 책임을 중시하는 분께 안정감을 줍니다. 🏛️"),
        ("『노인과 바다』 - 어니스트 헤밍웨이", "단순하지만 강한 주제와 인내를 좋아하는 실무형에게 추천. ⚓")
    ],
    "ISFJ": [
        ("『안나 카레니나』 - 톨스토이", "관계의 섬세함과 헌신을 이해하는 이들에게 울림을 줍니다. 🌸"),
        ("『작은 아씨들』 - 루이자 메이 올콧", "따뜻한 인간애와 일상 속 미덕을 좋아하신다면. 🕯️")
    ],
    "ESTJ": [
        ("『칼의 노래』 - 박완서(현대 고전)", "질서, 관습, 효율성을 중시하는 실행가에게 어울립니다. 🛠️"),
        ("『동물농장』 - 조지 오웰", "사회 구조와 권력관계를 명쾌하게 읽고 싶은 분께 추천. 🐖")
    ],
    "ESFJ": [
        ("『오만과 편견』 - 제인 오스틴", "사회적 유대와 감정 읽기를 즐기는 분에게 친근합니다. 🎀"),
        ("『비밀의 화원』 - 프랜시스 버넷", "따뜻하고 치유적인 이야기를 좋아하는 분께 추천. 🌿")
    ],
    "ISTP": [
        ("『모비 딕』 - 허먼 멜빌", "도전과 기술적 관찰을 즐기는 분석적 모험가에게 추천합니다. 🐋"),
        ("『달과 6펜스』 - W. 서머셋 몸", "예술적 충동과 현실의 괴리에서 오는 이야기에 끌린다면. 🎨")
    ],
    "ISFP": [
        ("『달과 6펜스』 - W. 서머셋 몸", "감각적 경험과 미적 감수성을 중시하는 분께 어울립니다. 🌸"),
        ("『밤의 피아노』 - 단편선 추천", "잔잔한 감정과 분위기를 느끼고 싶은 분에게 추천합니다. 🎹")
    ],
    "ESTP": [
        ("『위대한 개츠비』 - F. 스콧 피츠제럴드", "모험적이고 순간을 즐기는 분께 스타일리시한 선택입니다. 🕶️"),
        ("『로빈슨 크루소』 - 대니얼 디포", "행동과 문제 해결을 즐기는 활동가에게 추천. 🏝️")
    ],
    "ESFP": [
        ("『캔터베리 이야기』 - 제프리 초서", "인간 군상과 삶의 즉흥성을 즐기는 분께 재미를 줍니다. 🎪"),
        ("『무기여 잘 있거라』 - 어니스트 헤밍웨이", "감성적이면서도 극적인 서사를 좋아한다면. 🎭")
    ]
}

st.sidebar.header("🔎 선택 도구")
selected_mbti = st.sidebar.selectbox("당신의 MBTI를 선택하세요:", options=list(MBTI_RECOMMENDATIONS.keys()))

if st.sidebar.button("추천받기 📬"):
    recs = MBTI_RECOMMENDATIONS.get(selected_mbti, [])
    st.subheader(f"{selected_mbti}를 위한 추천 도서 ✨")

    # 무작위로 1~2권을 골라 보여주기
    sample_count = 2 if len(recs) >= 2 else 1
    chosen = random.sample(recs, sample_count)

    for title, note in chosen:
        st.markdown(f"### {title} \n\n{note}")
        st.write("---")

    # 짧은 개인화 멘트
    personality_lines = {
        "Analytical": "논리와 구조를 좋아하는 성향은 복잡한 서사를 차분히 해석하는 데 강합니다.🔍",
        "Emotional": "감성적 공감능력이 뛰어나서 인물의 내면에 쉽게 몰입합니다.💠",
        "Practical": "실용적 관점에서 의미를 찾는 편이라 교훈적 요소에 눈길이 갑니다.🧭",
    }
    st.info("추천 이유: 이 도서는 여러분의 성향을 자극할 만한 요소가 많습니다. 즐거운 독서 되세요! 🎈")

    # 확장 영역으로 추가 설명 제공
    with st.expander("📎 각 도서에 대한 더 자세한 설명 보기"):
        for title, note in chosen:
            st.write(f"**{title}** — {note} \n\n이 책은 시대적 배경, 주요 주제, 읽을 때 기대할 수 있는 감정적/사고적 경험을 제공합니다.")

else:
    st.write("사이드바에서 MBTI를 선택한 후 '추천받기 📬' 버튼을 눌러주세요. 🙂")

st.markdown("---")
st.markdown("##### 앱 사용 팁: *원하시면 특정 권한의 시대·장르·난이도 필터를 다음 버전에 추가해 드릴게요.*")

# 실행 안내 (앱 내부 안내)
st.caption("로컬에서 실행하려면: 터미널에서 `streamlit run streamlit_mbti_books.py` 를 입력하세요.")
